<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8">
        <title>云湛工作室 - 登录/注册</title>
        <link rel="stylesheet" href="styles.css">
        <script>
            function switchForm(formType) {
                document.getElementById('loginForm').style.display = formType === 'login' ? 'block' : 'none';
                document.getElementById('registerForm').style.display = formType === 'register' ? 'block' : 'none';
            }

            function handleLogin(event) {
                event.preventDefault();
                const formData = new FormData(document.getElementById('loginForm'));
                fetch('https://zhuohuastudio.7749.org/login.php', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = 'https://zhuo-hua-app.github.io';
                    } else {
                        alert(data.message);
                    }
                })
                .catch(error => console.error('Error:', error));
            }

            function handleRegister(event) {
                event.preventDefault();
                const formData = new FormData(document.getElementById('registerForm'));
                fetch('https://zhuohuastudio.7749.org/register.php', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    alert(data.message);
                })
                .catch(error => console.error('Error:', error));
            }
        </script>
    </head>
    <body>
    <header>
        <div class="logo">
            <img src="logo.png" alt="云湛工作室 Logo" id="logoh" />
        </div>
        <nav>
            <ul style="list-style: none;padding: 0;margin: 0;display: flex;float: right;">
                <li><a href="index.html" style="text-decoration: none;">主页</a></li>
                <li><a href="main.html" style="text-decoration: none;">讯息和联系</a></li>
                <li><a href="App.html" style="text-decoration: none;">Apps</a></li>
                <li><button onclick="window.location.href='login.html'" >登录/注册</button></li>
            </ul>
        </nav>
    </header>
    <h1>登录</h1>
    <form id="loginForm" onsubmit="handleLogin(event)">
        <label for="loginUsername">用户名:</label>
        <input type="text" id="loginUsername" name="username" required>
        <label for="loginPassword">密码:</label>
        <input type="password" id="loginPassword" name="password" required>
        <button type="submit">登录</button>
    </form>
    <h1>注册</h1>
    <form id="registerForm" style="display:none;" onsubmit="handleRegister(event)">
        <label for="registerUsername">用户名:</label>
        <input type="text" id="registerUsername" name="username" required>
        <label for="registerEmail">邮箱:</label>
        <input type="email" id="registerEmail" name="email">
        <label for="registerPassword">密码:</label>
        <input type="password" id="registerPassword" name="password" required>
        <button type="submit">注册</button>
    </form>
    <button onclick="switchForm('register')">注册</button>
    <button onclick="switchForm('login')">登录</button>
    </body>
</html>